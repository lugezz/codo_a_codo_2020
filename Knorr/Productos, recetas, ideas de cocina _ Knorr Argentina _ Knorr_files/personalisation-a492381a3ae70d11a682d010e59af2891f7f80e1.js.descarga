!function(e){var t=function(o,i){"use strict";var e=function(){var t,r,n;function a(e,t,r,n){if(o[e]&&o[e][t]&&o[e][t].dataFlag==="true"){var a=o[e];clearInterval(r);if(o.personalisedData&&o.personalisedData.userData&&o.personalisedData.userData.dataFlag==="true")l(o.personalisedData);c(a,t)}else if(f("sign-up-progressive_"+n)){var i=JSON.parse(localStorage.getItem("sign-up-progressive_"+n));s(i)}return""}return{init:function(){$(i).ready(function(){var e=i.body.getAttribute("data-locale");n=setInterval(function(){a("weatherStoreData","weather",n,e)},999);r=setInterval(function(){a("locationStoreData","location",r,e)},999);if(u("token")!==""||f("locale")&&f("sign-up-progressive_"+e))t=setInterval(function(){a("personalisedData","userData",t,e)},999);else l("");return""})}}}(),l=function(t){var e=$('[title*="%"]'),r,n;_.each(e,function(e){r=$(e).attr("title");if(u("token")!==""){n=$($.parseHTML(r)).text().replace("<@=","").replace("@>","");n=n.replace(/%(.*?)%/g,function(e){if(n.split("%")[1].length)return t.userData[n.split("%")[1].trim()]})}else n=r.replace(/(<([^>]+)>)/gi,"");$(e).attr("title",n)})},c=function(n,a){var i,o=RegExp(/%(\S.*?)%/g),l,c;_.each($(".profile-userDetails"),function(e){l=e.innerHTML.replace("&lt;@=","").replace(" @&gt;","");c=l.match(o);if(c!==null)i=c.map(function(e){return e.replace(/%/g,"")});if(i&&i.length)for(var t=0;t<i.length;t++){var r;r=n[a][i[t]];if(!r)if(Object.keys(n[a]).join(",").indexOf(i[t].split(".")[0])>-1)r="";if(typeof r==="string"){l=l.replace(i[t],r).replace(/%/g,"");e.classList.remove("hidden")}}e.innerHTML=l})},s=function(n){var a,i=RegExp(/%(\S.*?)%/g),o,l;_.each($(".profile-userDetails"),function(e){o=e.innerHTML.replace("&lt;@=","").replace(" @&gt;","");l=o.match(i);if(l!==null)a=l.map(function(e){return e.replace(/%/g,"")});if(a&&a.length)for(var t=0;t<a.length;t++){var r=n[a[t]];if(typeof r==="undefined")r="";o=o.replace(a[t],r)}o=o.replace(/%/g,"");e.innerHTML=o;e.classList.remove("hidden")})},u=function(e){var t,r;if(i.cookie.length>0){t=i.cookie.indexOf(e+"=");if(t!==-1){t=t+e.length+1;r=i.cookie.indexOf(";",t);if(r===-1)r=i.cookie.length;return i.cookie.substring(t,r)}}return""},f=function(e){if(t()&&localStorage.getItem(e))return true;else return false},t=function(){try{if(localStorage.getItem)return true}catch(e){return false}};return e.init(),{getCookie:u,init:e.init}}(e,e.document);e.personalisation=t,"object"==typeof module&&module.exports&&(module.exports=t)}(window);