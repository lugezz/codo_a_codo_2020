/* Version=6.6.14,Timestamp=2020-12-24T09:28:36.549Z */define("global-navigation",["search-methods","commonService"],function(r){"use strict";return IEA.module("UI.global-navigation",function(e,a,o){var v=null,c=null;_.extend(e,{defaultSettings:{modalCl:".js-modal-search",searchWrapper:".c-global-search__form .c-global-search__wrapper",searchInputField:".c-global-search__form .typeahead",clearSearch:".o-btn-clear-search",searchForm:".c-global-search__form",searchTextBox:".c-global-search__textbox.typeahead",defaultSuggestions:!0,searchInputFont:30,searchInputFontMobile:16,suggestionsLimit:6,customModuleDiv:".o-navbar-tier2-wrapper .o-navbar-custom-module",level2ClassName:".o-navbar-tier2-item>.o-navbar-label",level3ClassName:".o-navbar-tier3-item>.o-navbar-label",level4ClassName:".o-navbar-tier4-item>.o-navbar-label",globalNavigation:".global-navigation",geoLocalePopup:".c-geolocale-popup",userLocation:"user_location",localPrefCountryCodeName:"lp_country_code",localPrefRegionCodeName:"lp_region_code",localPrefUrl:"preferred_url",localPrefCookieExpirationDays:30,gbDropdown:".o-navbar-dropdown-menu",geoPopupTemplate:"partials/global-nav-popup.hbss",navbarMarkerTopPosition:"-30px",promotionImage:"promotion-image"},events:{"focus keypress .c-global-search__form .typeahead":"keyboardHandler","click .js-search-btn":"openModal","click .js-btn-close":"closeModal","submit .c-global-search__form":"submitForm","click .c-geolocale-popup__brand":"setLocalPreferenceAndClosePopup","click .c-geolocale-popup__local":"clearPrefCookie","click .c-geo-popup-close":"setLocalPreferenceAndClosePopup"},globalSelector:{oNavBarBack:".o-navbar-back",navElementHighlight:".c-nav-elem-highlight",oNavbarTier1ScrollerWrapper:".o-navbar-tier1-scroller-wrapper",oNavbarItem:".o-navbar-item",oNavbarMenuWrapper:".o-navbar-menu-wrapper",oNavbar:".o-navbar",oContinueArrow:".o-continue-arrow",jsNavbarOverlayClose:".js-navbar-overlay-close",oNavbarTier1Wrapper:".o-navbar-tier1-wrapper",oNavbarTier2Wrapper:".o-navbar-tier2-wrapper",oNavbarCustomModuleWrapper:".o-navbar-custom-module-wrapper",oNavbarTier1Item:".o-navbar-tier1-item",jsDirectLinkItem:".js-direct-link-item",bgImage:".bg-image",oNavbarCustomModuleListWrapper:".o-navbar-custom-module-list-wrapper",oNavbarDesktop:"o-navbar-desktop",oNavbarMobile:"o-navbar-mobile",oNavbarTier3Wrapper:".o-navbar-tier3-wrapper",oNavbarTier4Wrapper:".o-navbar-tier4-wrapper",oNavbarOpened:"o-navbar-opened",oNavbarLabelDown:".o-navbar-label-down",oNavbarLabelCross:".o-navbar-label-cross",oNavbarTier3ItemOpened:".o-navbar-tier3-item.opened",oNavbarTier2ItemOpened:".o-navbar-tier2-item.opened",oNavbarLabel:".o-navbar-label",aOnavbarLabel:"a.o-navbar-label"},initialize:function(e){this._super(e),v=new IEA.commonService,this.searchMethods=new r,this.triggerMethod("init")},render:function(){return this.$el.html(this.template(this.getModelJSON())),!1===this._isEnabled&&(this.enable(),this._isEnabled=!0),this.triggerMethod("render"),this},enable:function(){this.triggerMethod("beforeEnable");var e,a,o,r,i,t=this,n=t.defaultSettings,l=t.globalSelector;function s(){t.$oNavbarTier1ScrollerWrapper=t.$el.find(l.oNavbarTier1ScrollerWrapper),t.$oNavbarItem=t.$el.find(l.oNavbarItem),t.$oNavbarMenuWrapper=t.$el.find(l.oNavbarMenuWrapper),t.$navBar=t.$el.find(l.oNavbar),t.$body=$("body"),t.$oNavbarDropdowMenu=t.$el.find(n.gbDropdown),t.clearSearch=n.clearSearch,c=$(window).width(),t.searchKeyword="",t.currentLevel=1,(t=_.extend(t,t.searchMethods)).delegateEvents(),v.isMobile()?t.inputFont=n.searchInputFontMobile:t.inputFont=n.searchInputFont,t._globalNavHighlight(),a=t.$el.find(l.oContinueArrow),$(window).on("scroll",function(){var e=$(window).scrollTop();0<a.length&&v.animate(a,{opacity:0},1e3,0,function(){a.remove()}),t.$navBar.toggleClass("u-transparent",0<e)}),o=t.$el.find(n.modalCl),$(document).keyup(function(e){i=t.$el.find(".o-navbar-item.submenu.active").find(".o-navbar-menu-wrapper:visible"),r=i.find(l.jsNavbarOverlayClose+":visible"),27===e.keyCode&&((o.is(":visible")||i.length)&&(t.$el.find(".o-navbar-tier1-item.active").find("> a").focus(),r.trigger("click"),t.closeModal(e)),t._resetHamburgerMenuButtonState(e))}),e=v.debounce(function(){c!==$(window).width()&&(t._resetNav(),c=$(window).width())},1e3,!0),window.addEventListener("resize",e),t._resetNav(),t.enableSearchMethods(),t.modelData.localeSelectionDetails&&t.modelData.localeSelectionDetails.geoPopupEnabled&&!t.modelData.cookielessExperience&&!t.$el.find(".wcmmode-edit").length&&v.isCookiesEnabled()&&t.geoPopup(),t.$oNavbarTier1ScrollerWrapper.css("visibility","visible"),t._checkMobile()||t.$el.find(l.oNavbarTier3Wrapper+","+l.oNavbarTier4Wrapper).css({height:0,opacity:0,display:"none"}),t.triggerMethod("enable")}t.modelData=t.getModelJSON().globalNavigation,t.MobileDesktopNavJs={true:"global-nav-mobile",false:"global-nav-desktop"}[t._checkMobile()],require([t.MobileDesktopNavJs],function(e){t.MobileDesktopNav=new e,(t=_.extend(t,t.MobileDesktopNav)).modelData.localeSelectionDetails&&t.modelData.localeSelectionDetails.geoPopupEnabled&&!t.modelData.cookielessExperience&&!t.$el.find(".wcmmode-edit").length&&v.isCookiesEnabled()?require(["geo-location"],function(e){t.geoLocation=new e,t=_.extend(t,t.geoLocation),s()}):s()})},_resetHamburgerMenuButtonState:function(e){this._checkMobile()&&(this._setupToggleNav(e),$(".js-navbar-toggle").focus())},onShow:function(){v&&v.ios7SVGsupport([".js-navbar-overlay-close"])},_resetNav:function(){var e,a=this;a.isMobile=a._checkMobile(),a.isMobile&&"global-nav-desktop"===a.MobileDesktopNavJs?e="global-nav-mobile":a.isMobile||"global-nav-mobile"!==a.MobileDesktopNavJs||(e="global-nav-desktop"),e?require([e],function(e){a.MobileDesktopNav=new e,(a=_.extend(a,a.MobileDesktopNav))._destroyNav(),a.openNav(),a.isMobile||a._updateScroller()}):(a._destroyNav(),a.openNav(),a.isMobile||a._updateScroller())},_destroyNav:function(){var e,a,o=this,r=o.globalSelector;o.$oNavbarTier1ScrollerWrapper.removeAttr("style"),o.$oNavbarItem.removeAttr("style"),o.$oNavbarMenuWrapper.removeAttr("style"),e=o.$el.find(r.oNavBarBack),o.$navBar.removeClass("open"),v.animate(e,{opacity:0},500,0,function(){e.hide()}),o.$el.find(r.oNavbarTier1Wrapper).css("left",0),a=o.$el.find(r.oNavbarCustomModuleWrapper),v.animate(a,{opacity:0,left:0},500,0,function(){a.hide()}),$(window).width()<991?a.css("overflow","hidden"):a.css("overflow","scroll"),o._closeAllTiers(),o._toggleOverlay(!1),o.$el.find(".js-navbar-overlay-close,.o-navbar-back,.js-navbar-toggle,.o-navbar-tier2-wrapper,.o-navbar-tier1-item .o-navbar-label,.o-navbar-tier2-item .o-navbar-label,.o-navbar-menu-wrapper .o-navbar-label").unbind(),o.currentLevel=1},openNav:function(){var e="ontouchstart"in document.documentElement?"touchstart":"click",i=this,t=i.globalSelector,n=t.oNavbarCustomModuleWrapper;i.$el.find(".o-navbar-tier1-item, .o-navbar-tier2-item").on("keydown",">.o-navbar-label",function(e){13===e.which?i.switchFocusToFirstSubmenuLink=!0:i.switchFocusToFirstSubmenuLink=!1,i._checkMobile()&&(9===e.which&&!e.shiftKey&&$(e.currentTarget.parentElement).is(":last-child")&&$(e.currentTarget.parentElement).hasClass("o-navbar-tier1-item")||9===e.which&&e.shiftKey&&$(e.currentTarget.parentElement).is(":first-child")&&$(e.currentTarget.parentElement).hasClass("o-navbar-tier1-item"))&&i._setupToggleNav()}),i.$el.find(".o-navbar-tier1-item").on("click",">.o-navbar-label",function(e){e.preventDefault();var a=i.$el.find(".o-navbar-tier1-item.active"),o=$(this),r=$(this).closest("li").data("bg-path");o.parent().hasClass("active")?(o.closest(".o-navbar-menu-wrapper:visible").find(".js-navbar-overlay-close:visible").trigger("click"),o.parent().removeClass("active"),o.attr("aria-expanded","false")):(0<a.length&&(i._checkMobile()||(v.animate(a.find(t.oNavbarTier2Wrapper),{opacity:0},500),a.find(t.oNavbarTier2Wrapper).css("display","none"),a.find(">.o-navbar-label").attr("aria-expanded","false")),$(".level1-background-image").hide()),o.siblings(t.oNavbarTier2Wrapper).css("visibility","inherit"),v.animate(o.siblings(t.oNavbarTier2Wrapper),{opacity:1},200,0,function(){o.siblings(t.oNavbarTier2Wrapper).css("display","block"),i.switchFocusToFirstSubmenuLink&&i.$el.find(".o-navbar-tier1-item.active").find(".o-navbar-menu-wrapper:visible").find("li:first-child > a").first().focus()}),o.parent().addClass("active").siblings().removeClass("active"),o.attr("aria-expanded","true"),o.parent().hasClass("custom")?($(n).removeClass("active").removeAttr("style"),($(n).data("index")?$(n+"[data-index="+o.parent().index()+"]"):$(n)).addClass("active")):$(n).removeClass("active"),i._toggleOverlay(!0)),$(t.oNavbarTier1Item).click(function(){var e=$(t.bgImage);r?e.css("background-image","url('"+r+"')"):e.css("background-image","")}),i.$el.find(t.aOnavbarLabel).hover(function(){var e=$(this).closest("li");e.length&&-1<e[0].className.indexOf("o-navbar-tier1-item")||(e=$(t.bgImage),i.dataAttributeVal=$(this).closest("li").data("bg-path"),i.dataAttributeVal&&e.css("background-image","url('"+i.dataAttributeVal+"')"))},function(){var e=$(t.bgImage);r&&e.css("background-image","url('"+r+"')")}),i.isMobile||($(e.target).parents(".o-navbar-item").find(".promotion-box").addClass(i.defaultSettings.promotionImage),v.dispatchEvent("globalNavLevel1Clicked",i))}),i.$el.find(t.jsNavbarOverlayClose).on("click",function(e){e.preventDefault(),i.$el.find(".o-navbar-tier1-item.active > a").attr("aria-expanded","false"),e.originalEvent&&i.$el.find(".o-navbar-tier1-item.active").find("a").first().focus(),i._closeAllTiers(),$(t.oNavbarTier2Wrapper+","+t.oNavbarTier3Wrapper+","+t.oNavbarTier4Wrapper).css("display","none"),i.$oNavbarItem.removeClass("disabled"),v.animate(".o-navbar-marker",{top:i.defaultSettings.navbarMarkerTopPosition},500),i._toggleOverlay(!1)}),i.$el.find(t.jsNavbarOverlayClose).on("keydown",function(e){if(9===e.which&&!e.shiftKey||13===e.which){if(i.$el.find(t.jsNavbarOverlayClose).trigger("click"),i._checkMobile())return i.$el.find(i.globalSelector.oNavbar).removeClass("open"),$(".js-navbar-toggle").attr("aria-expanded","false"),$(".js-navbar-toggle").focus(),!1;i.$el.find(".o-navbar-tier1-item.active > a").attr("aria-expanded","false"),i.$el.find(".o-navbar-tier1-item.active > a").first().focus()}}),i._handleTierOneSubMenuKeyDown(),i._handleTierTwoSubMenuKeyDown(),i._handleTierTwoClickEvent(),i.isMobile||$(window).width()<991?(i._setupMobileNav(),$(document).off(e,".js-navbar-toggle").on(e,".js-navbar-toggle",function(e){e.stopPropagation(),i._setupToggleNav(e)}),$(document).on("keydown",".js-navbar-toggle",function(e){13===e.keyCode&&i._setupToggleNav(e)}),i.$el.find(".o-navbar-item.submenu").on("click",".o-navbar-label",function(){event.stopPropagation(),i._toggleMobileSubmenu($(this))}),i.$el.find(".o-navbar-custom-module-menu.submenu").on("click",">.o-navbar-label",function(){i._toggleMobileCustomSubmenu(i)}),i._handleBackButtonClick(e)):i._setupSecondaryNav()},_handleBackButtonClick:function(e){var a=this;a.$el.find(a.globalSelector.oNavBarBack).on(e,function(){$(a.globalSelector.oNavbarCustomModuleListWrapper).is(":visible")&&$(window).width()<768?a._toggleMobileCustomSubmenu(a):a._toggleMobileSubmenu(!1)})},_globalNavHighlight:function(){var o=this.globalSelector,e=this.$el.find(o.navElementHighlight).parents(".submenu").find(".o-navbar-menu-wrapper .c-browseAll");0<e.length&&_.each(e,function(e,a){e=$(e);e.siblings(o.oNavbarItem).find(o.navElementHighlight).length&&e.addClass(o.navElementHighlight)})},_toggleMobileCustomSubmenu:function(e){this._updateMobileScroller(e)},_toggleOverlay:function(e){var a,o=this,r=o.$el.find(".o-navbar-overlay"),i=$(".js-main-wrapper"),t=o.globalSelector;!1===e?(o.scrollingMobile=!1,a=o.$el.find(t.oNavbarCustomModuleWrapper),v.animate(a,{opacity:0},500,0,function(){a.hide()}),o.$body.removeClass(t.oNavbarOpened),$(t.oContinueArrow).show(),v.animate(t.oContinueArrow,{opacity:1},500),v.animate(".o-navbar-tier2-wrapper:visible",{opacity:0},200),o.$el.find(t.oNavbarTier1Item).removeClass("active"),v.animate(r,{opacity:0},200,200,function(){r.hide()}),i.removeAttr("style")):o.$body.hasClass(t.oNavbarOpened)||(o.$body.addClass(t.oNavbarOpened),v.animate(t.oContinueArrow,{opacity:0},500,function(){$(t.oContinueArrow).hide()}),r.css("display","block"),v.animate(r,{opacity:800},500),$(i).animate({blurRadius:10},{step:function(){$(i).css({"-webkit-filter":"blur('10px')",filter:"blur('10px')"})},duration:500}))},_closeAllTiers:function(){var e,a=this.globalSelector;this.$oNavbarItem.removeClass("disabled"),(e=this.$el.find(a.oNavbarTier2ItemOpened)).children(a.oNavbarLabel).removeClass("disabled"),a=this.$el.find(a.oNavbarTier3ItemOpened).first(),this._closeSubmenu(a,a.find(this.globalSelector.oNavbarMenuWrapper).first()),e=e.first(),this._closeSubmenu(e,e.find(this.globalSelector.oNavbarMenuWrapper).first())},_updateScroller:function(){setTimeout(function(){$(".o-navbar-dropdown-menu").removeClass("animated")},1500)},_checkMobile:function(){return v.isMobileAndTablet()&&$(window).width()<=768},_closeSubmenu:function(e,a){this.$oNavbarDropdowMenu.addClass("animated"),v.animate(a,{opacity:0,height:0,visibility:"hidden"},600,0,this._updateScroller),e.removeClass("opened"),a.css({display:"none"}),v.animate(e.find(this.globalSelector.oNavbarLabelDown).first(),{opacity:1},1e3),v.animate(e.find(this.globalSelector.oNavbarLabelCross).first(),{opacity:0},1e3)},_setupToggleNav:function(e){var a,o,r=this,i=r.globalSelector,t=r.$el.find(i.oNavbar),n=r.$el.find(i.oNavBarBack),l=r.$el.find(i.oNavbarTier1Wrapper),s=r.$el.find(".js-navbar-toggle-label"),c=r.$el.find(i.oNavbarCustomModuleWrapper),b=r.modelData.navbar.label;t.toggleClass("open"),r.currentLevel=1,t.hasClass("open")?(r.$el.find(i.oNavbarTier1Wrapper).css("left",0),r._toggleOverlay(!0),a=$(window).width(),r.$el.find(i.oNavbarTier1Item).add(i.jsDirectLinkItem).each(function(e){$(this).css({position:"relative",left:"-"+a+"px"}),v.animate($(this),{left:0},500,.1*(e+2),function(){$(this).css("position","initial")})}),$(r.$oNavbarTier1ScrollerWrapper).show(),v.animate(r.$oNavbarTier1ScrollerWrapper,{opacity:1},500),$(l).show(),v.animate(l,{opacity:1},0,0,function(){var e=r.$oNavbarTier1ScrollerWrapper.css({display:"block"}).data("scroller");e&&e.refresh(),r._updateMobileScroller(r),r.globalHeightSetForTiers||(r._setGlobalNavSearchHeight(),r._setTiersHeight(),r.globalHeightSetForTiers=!0)}),$(".js-navbar-toggle").attr("aria-expanded","true"),r.$oNavbarTier1ScrollerWrapper.find("li").first().find("a").focus(),r._handleTierOneSubMenuKeyDown(),r._handleTierTwoSubMenuKeyDown(),r._handleTierTwoClickEvent()):(v.isMobile()&&v.animate(r.$oNavbarTier1ScrollerWrapper,{opacity:0},500,0,function(){$(r.$oNavbarTier1ScrollerWrapper).hide()}),s.html(b&&" "!==b?b:"Menu"),v.animate(l,{opacity:0},500,0,function(){$(l).hide()}),v.animate(n,{opacity:0},500,0,function(){$(n).hide()}),o=r.$el.find(i.oNavbarCustomModuleListWrapper),v.animate(c,{opacity:0,left:0},500,0,function(){$(c).hide()}),$(window).width()<768&&v.animate(o,{opacity:0},500,0,function(){$(o).hide()}),r._toggleOverlay(!1),$(".js-navbar-toggle").attr("aria-expanded","false"))},_handleTierTwoClickEvent:function(){var e=this;e.$el.find(".o-navbar-tier2-item.submenu").on("click",".o-navbar-label",function(){e._toggleSubmenu&&e._toggleSubmenu($(this)),e.switchFocusToFirstSubmenuLink&&e.$el.find(".o-navbar-tier2-item.opened").find(".o-navbar-menu-wrapper:visible").find("li:first-child > a").focus(),e._checkMobile()&&e.$el.find(".o-navbar-tier3-wrapper.opened").find("ul").find("li:first-child > a").focus()})},_handleTierOneSubMenuKeyDown:function(){var a=this;a.$el.find(".o-navbar-tier1-wrapper .o-navbar-dropdown-menu").find("> li:visible:first-child").off("keydown").on("keydown",function(e){if(9===e.which&&e.shiftKey)return-1!==e.currentTarget.className.indexOf("o-navbar-tier3-item")?(a._checkMobile()?$(a.globalSelector.oNavBarBack).is(":visible")&&$(a.globalSelector.oNavBarBack).trigger("touchstart"):$(e.currentTarget).parents(".submenu").first().find("a").first().trigger("click"),$(e.currentTarget).parents(".submenu").first().find("a").first().focus(),!1):-1!==e.currentTarget.className.indexOf("o-navbar-tier2-item")?(a.$el.find(".o-navbar-tier1-item.active > a").attr("aria-expanded","false"),a.$el.find(".o-navbar-tier1-item.active > a").focus(),a._checkMobile()?$(a.globalSelector.oNavBarBack).is(":visible")&&$(a.globalSelector.oNavBarBack).trigger("touchstart"):a.$el.find(".o-navbar-tier1-item.active").find(a.globalSelector.jsNavbarOverlayClose).trigger("click"),!1):void 0})},_handleTierTwoSubMenuKeyDown:function(){var a=this;a.$el.find(".o-navbar-tier2-wrapper .o-navbar-dropdown-menu").find("> li:visible:last-child").off("keydown").on("keydown",function(e){9!==e.which||e.shiftKey||-1!==e.currentTarget.className.indexOf("o-navbar-tier3-item")&&(a._checkMobile()?$(a.globalSelector.oNavBarBack).is(":visible")&&$(a.globalSelector.oNavBarBack).trigger("touchstart"):$(e.currentTarget).closest(".submenu").find("a").first().trigger("click"),$(e.currentTarget).closest(".submenu").find("a").focus())})}})})});