/* Version=6.6.14,Timestamp=2020-12-24T09:28:36.549Z */define("social-sharing",["addthisloader","socialSharing","commonService"],function(n){"use strict";var r;return IEA.module("UI.social-sharing",function(e,t,a){var i=null;_.extend(e,{defaultSettings:{productElement:".c-product-images-thumbnail"},initialize:function(e){this._super(e),i=new IEA.socialsharing,r=new IEA.commonService,this.triggerMethod("init")},render:function(){return this.$el.html(this.template(this.getModelJSON())),!1===this._isEnabled&&(this.enable(),this._isEnabled=!0),this.triggerMethod("render"),this},enable:function(){this.triggerMethod("beforEnable");var e=this,t={};r.getConsent()?(e.componentJson=e.getModelJSON().socialSharing,n.loadAPI(function(){addthis.update("share","url",window.location.href),setTimeout(function(){e.$el.find(".js-social-sharing").removeAttr("title")},3e3)},e.$el,e.componentJson,!1),t.socialSharingMenu=e.$el.find("ul.c-social-sharing-stack"),t.socialSharing=e.$el.find(".js-social-sharing"),t.compJson=e.componentJson,i.enableSocial(t),e.componentJson.pdfServiceUrl&&e._initDownloadPdf(),e.componentJson.isFavProductEnabled&&require(["favourites"],$.proxy(e._favRequireCallback,e,"product")),e.componentJson.isFavRecipesEnabled&&require(["favourites"],$.proxy(e._favRequireCallback,e,"recipe")),e.componentJson.isFavArticleEnabled&&require(["favourites"],$.proxy(e._favRequireCallback,e,"unique")),this.triggerMethod("enable")):e.$el.remove()},_setAttrForFav:function(e){var t,a=this;switch(e){case"product":t=$(a.defaultSettings.productElement).attr("data-product-id");break;case"recipe":t=$("#recipe-detail-id").attr("data-fav-recipe-id");break;case"unique":t=$("#uniquePageId").attr("data-fav-unique-id")}return!(!t||!e)&&(a.$el.find(".c-favourites__wrapper").attr("data-fav-"+e+"-id",t).attr("data-fav-type",e),a.$el.find(".c-favourites-btn__wrapper").attr("data-fav-"+e+"-id",t).attr("data-fav-type",e),a.$el.find(".c-favourites__wrapper .fav-default").attr("data-fav-"+e+"-id",t).attr("data-fav-type",e),a.$el.find(".c-favourites__wrapper .fav-selected").attr("data-fav-"+e+"-id",t).attr("data-fav-type",e),a.$el.find(".c-favourites-btn__wrapper .fav-default").attr("data-fav-"+e+"-id",t).attr("data-fav-type",e),a.$el.find(".c-favourites-btn__wrapper .fav-selected").attr("data-fav-"+e+"-id",t).attr("data-fav-type",e),!0)},_favRequireCallback:function(e){this._setAttrForFav(e)&&(new IEA.Favourites(this.componentJson),$(".favourite-element").removeClass("hidden"))},_initDownloadPdf:function(){var e=this,t=e.$el.find(".c-social-sharing-downloads");t.length&&t.off("click").on("click",function(){i._downloadTrigger($(this),e.componentJson.pdfServiceUrl)})}})})});